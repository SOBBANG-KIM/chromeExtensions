<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jira Worklog Quick Add</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Jira Worklog Quick Add</h1>
        <p id="authStatus" class="auth-status"></p>
      </header>

      <nav class="tabs" role="tablist">
        <button
          id="tab-issue"
          class="tab active"
          type="button"
          role="tab"
          aria-selected="true"
          aria-controls="panel-issue"
        >
          add jira
        </button>
        <button
          id="tab-worklog"
          class="tab"
          type="button"
          role="tab"
          aria-selected="false"
          aria-controls="panel-worklog"
        >
          add worklog
        </button>
        <button
          id="tab-my-issues"
          class="tab"
          type="button"
          role="tab"
          aria-selected="false"
          aria-controls="panel-my-issues"
        >
          add my issues
        </button>
      </nav>

      <section
        id="panel-issue"
        class="tab-panel"
        role="tabpanel"
        aria-labelledby="tab-issue"
      >
        <section class="card">
          <h2>이슈 내용</h2>
          <div class="row">
            <label class="grow">
              프로젝트 키
              <input id="projectKey" type="text" placeholder="FTPM" />
            </label>
            <label class="grow">
              이슈 타입 (이름)
              <select id="issueType">
                <option value="큰틀">큰틀</option>
                <option value="작업">작업</option>
                <option value="버그">버그</option>
                <option value="부작업">부작업</option>
              </select>
            </label>
          </div>
          <label id="parentIssueRow">
            상위 이슈 키
            <input id="parentIssueKey" type="text" placeholder="FTPM-1234" />
          </label>
          <label>
            요약
            <input id="summary" type="text" placeholder="요약을 입력하세요" />
          </label>
          <label>
            설명
            <textarea
              id="description"
              rows="6"
              placeholder="상세 내용을 입력하세요"
            ></textarea>
          </label>
        </section>

        <section class="actions">
          <button id="create" class="primary" type="button">등록</button>
          <button id="clear" class="secondary" type="button">입력 초기화</button>
        </section>
      </section>

      <section
        id="panel-worklog"
        class="tab-panel hidden"
        role="tabpanel"
        aria-labelledby="tab-worklog"
      >
        <section class="card">
          <h2>Worklog 입력</h2>
          <div class="row" style="gap: 8px;justify-content: center;align-items: center;">
            <label class="grow">
              이슈 키
              <input id="worklogIssueKey" type="text" placeholder="FTPM-1234" />
            </label>
            <button id="useLastIssue" class="secondary" type="button" style="margin-top: 8px;">
              마지막 이슈 키 사용
            </button>
          </div>
          <div class="divider"></div>
          <h3>구글 캘린더</h3>
          <div class="row">
            <label class="grow">
              날짜
              <input id="calendarDate" type="date" />
            </label>
            <label class="grow">
              시간 범위
              <input
                id="calendarRange"
                type="text"
                placeholder="09:30 ~ 18:30"
              />
            </label>
          </div>
          <div class="row" style="align-items: center; flex-wrap: wrap; gap: 8px;">
            <button id="googleLogin" class="secondary" type="button">
              Google 로그인
            </button>
            <button id="loadMeetings" class="secondary" type="button">
              회의 불러오기
            </button>
            <span id="loadedMeetingsCount" class="calendar-status" aria-live="polite"></span>
          </div>
          <p id="calendarStatus" class="calendar-status"></p>
          <div class="divider"></div>
          <div class="row">
            <label class="grow" style="max-width: 230px;">
              시작 시각
              <input id="worklogStarted" type="datetime-local" />
            </label>
            <label class="grow wide">
              작업 시간
              <input id="worklogTimeSpent" type="text" placeholder="16h" />
            </label>
          </div>
          <label>
            설명
            <textarea
              id="worklogComment"
              rows="4"
              placeholder="간단한 작업 내용을 입력하세요"
            ></textarea>
          </label>
        </section>

        <section class="actions">
          <button id="addWorklog" class="primary" type="button">
            한번에 저장
          </button>
          <button id="addWorklogsFromCalendar" class="primary" type="button" disabled>
            회의별로 저장
          </button>
          <button id="clearWorklog" class="secondary" type="button">
            입력 초기화
          </button>
        </section>
      </section>

      <section
        id="panel-my-issues"
        class="tab-panel hidden"
        role="tabpanel"
        aria-labelledby="tab-my-issues"
      >
        <section class="card">
          <h2>내 이슈 목록</h2>
          <div class="row issue-filter-row">
            <div style="width: 60px; margin-bottom: 8px;">상태: </div>
            <input id="myIssuesStatusFilter" type="text" placeholder="진행 중" value="진행 중" style="margin-top: 0;"/>
            <div class="actions issue-filter-actions">
              <button id="loadMyInProgressIssues" class="primary" type="button">
                목록 불러오기
              </button>
            </div>
          </div>
          <p id="myIssuesStatus" class="calendar-status"></p>
          <div id="myIssuesPaging" class="issue-paging hidden">
            <span id="myIssuesPageInfo" class="issue-page-info"></span>
            <div class="issue-paging-buttons">
              <button id="myIssuesPrev" class="secondary" type="button">이전</button>
              <button id="myIssuesNext" class="secondary" type="button">다음</button>
            </div>
          </div>
          <ul id="myIssuesList" class="issue-list" aria-live="polite"></ul>
        </section>
      </section>

      <div id="status" class="status" role="status"></div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
